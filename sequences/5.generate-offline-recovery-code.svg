<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1794" height="2596"><desc>title%20Generate%20offline%20recovery%20code%0A%0AYourClient-%3EYourClient%3A%20The%20user%20is%20already%20logged%20in.%0A%0AYourClient-%3EYourClient%3A%20Generate%20a%20offline%20recovery%20code%0A%0AYourClient-%3EYourClient%3A%20Enter%20current%20password%0A%0AYourClient-%3EThisPackage%3A%20getAuthenticationToken('username'%2C'password')%0A%0AThisPackage-%3EYourClient%3A%20Return%20the%20authentication%20token%5Cn%20keccak(master_key)%0A%0AYourClient-%3EYourServer%3A%20Up%20to%20your%20dApp%20but%20as%20the%20user%20is%20logged%5Cnin%20on%20your%20dApp%20side%20you%20probably%20want%20to%5Cnauthentication%20on%20this%20endpoint.%0A%0AYourClient-%3EYourServer%3A%20Get%20the%20encrypted%20key%20info%20for%20the%20user%3A%20%5Cn-%20username%20%5Cn-%20authenticationToken%0A%0AYourServer-%3EYourServer%3A%20Looking%20from%20db%20using%20username%3A%20%5Cn-%20serverAuthenticationToken%5Cn-%20salt%5Cn-%20EncryptedWallet.key%5Cn-%20EncryptedWallet.iv%0A%0AYourServer-%3EThisPackage%3AserverHashMatchesClientHash(salt%2C%20clientAuthenticationToken%2C%20serverAuthenticationToken)%5Cn%5CnMakes%20sure%20the%20stored%20auth%20token%20matches%20the%20one%20sending%20in%20before%20returning%20the%20encrypted%20info%5Cn%5CnIf%20you%20are%20not%20using%20node%20as%20your%20backend%20the%20github%5Creadme%20explains%20what%20this%20method%20does%20so%20you%20can%5Cnwrite%20it%20in%20the%20language%20your%20using.%0A%0AThisPackage-%3EYourServer%3ABoolean%20result%0A%0AYourServer-%3EYourServer%3AIf%20false%20do%20not%20carry%20on%20and%20return%5Cnand%204xx%20http%20code%20back%20to%20your%20client.%0A%0AYourServer-%3EYourClient%3A%20Returns%3A%5Cn-EncryptedWallet.key%5Cn-EncryptedWallet.iv%0A%0AYourClient-%3EThisPackage%3A%20generateOfflineRecoveryCode(%5Cn'username'%2C%20%5Cn'password'%2C%5Cn%20EncryptedKeyInfo)%0A%0AThisPackage-%3EYourClient%3A%20return%20GenerateRecoveryCodeResponse%20object%0A%0AYourClient-%3EYourServer%3ASend%20to%20the%20server%20%5Cn%20-%20Username%5Cn%20-%20GenerateRecoveryCodeResponse.offlineRecoveryCode.id%5Cn%20-%20GenerateRecoveryCodeResponse.ethereumAddress%20%5Cn%20-%20GenerateRecoveryCodeResponse.signature%20%5Cn%20-%20GenerateRecoveryCodeResponse.userRecoveryCodeAuthenticationToken%2C%20%5Cn%20-%20GenerateRecoveryCodeResponse.encryptedKeyInfo.key%20%5Cn%20-%20GenerateRecoveryCodeResponse.encryptedKeyInfo.iv%5Cn%5CnThe%20signature%20is%20a%20signed%20hash%20of%20the%20recovery%20encrypted%5Cnprivate%20key%20%2B%20iv%20signed%20with%20your%20ethereum%20private%20key%5Cn%5CnAs%20you%20have%20this%20signature%20here%20you%20in%20theory%20can%5Cnverify%20the%20ethereum%20address%20is%20owned%20by%20this%20user.%5CnYou%20can%20add%20more%20authentication%20in%20here%20like%20a%20%5Cnjwt%20token%20or%20something%20along%20those%20lines%20but%20that%5Cnis%20up%20to%20you%20to%20decide%20depending%20on%20your%20dApps%5Cnrequirements.%0A%0AYourServer-%3EYourServer%3A%20Check%20if%20recovery%20code%20id%20already%20exists%0A%0AYourServer-%3EYourServer%3A%20If%20exists%20throw%204xx%20you%20can%20not%20have%5Cnrepeated%20recovery%20code%20id%20(should%20never%5Cnhappen)%0A%0AYourServer-%3EThisPackage%3AverifyEthereumAddress(GenerateRecoveryCodeResponse.signature%2C%5CnGenerateRecoveryCodeResponse.encryptedKeyInfo%2C%5CnGenerateRecoveryCodeResponse.ethereumAddress)%5Cn%5CnThe%20signature%20is%20a%20signed%20hash%20of%20the%20recovery%20encrypted%5Cnprivate%20key%20%2B%20iv%20signed%20with%20your%20ethereum%20private%20key%5Cn%5CnIf%20you%20are%20not%20using%20node%20as%20your%20backend%20the%20github%5Creadme%20explains%20what%20this%20method%20does%20so%20you%20can%5Cnwrite%20it%20in%20the%20language%20your%20using.%0A%0AThisPackage-%3EYourServer%3ABoolean%20result%0A%0AYourServer-%3EYourServer%3AIf%20false%20do%20not%20carry%20on%20and%20return%5Cnand%204xx%20http%20code%20back%20to%20your%20client.%0A%0AYourServer-%3EThisPackage%3AhashAuthenticationTokenOnServer(GenerateRecoveryCodeResponse.userAuthenticationToken)%5CnThis%20returns%20a%20random%20salt%20and%20the%20server%20authentication%20hash%5Cn(HashAuthenticationTokenOnServerResponse)%5Cn%5CnIf%20you%20are%20not%20using%20node%20as%20your%20backend%20the%20github%5Creadme%20explains%20what%20this%20method%20does%20so%20you%20can%5Cnwrite%20it%20in%20the%20language%20your%20using.%0A%0AThisPackage-%3EYourServer%3Areturn%20HashAuthenticationTokenOnServerResponse%5Cn-%20HashAuthenticationTokenOnServerResponse.serverAuthenticationHash%5Cn-%20HashAuthenticationTokenOnServerResponse.salt%0A%0AYourServer-%3EYourServer%3AInsert%20in%20recovery%20code%20db%20table%20mapped%20to%20username%20%5Cn%20-%20HashAuthenticationTokenOnServerResponse.serverAuthenticationHash%5Cn%20-%20HashAuthenticationTokenOnServerResponse.salt%5Cn%20-%20GenerateRecoveryCodeResponse.offlineRecoveryCode.id%2C%20%5Cn%20-%20GenerateRecoveryCodeResponse.encryptedKeyInfo.key%20%5Cn%20-%20GenerateRecoveryCodeResponse.encryptedKeyInfo.iv%5Cn%0A%0AYourServer-%3EYourClient%3A%20Done%0A%0AYourClient-%3EYourClient%3A%20Show%20GenerateRecoveryCodeResponse.offlineRecoveryCode.userCode%5Cnto%20the%20user%20for%20them%20to%20download%20or%20copy%20and%20save%20somewhere%0A%0AYourClient-%3EYourClient%3A%20Offline%20recovery%20code%20generated%0A</desc><defs/><g><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g><rect fill="white" stroke="none" x="0" y="0" width="1794" height="2596"/></g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="16.5pt" font-style="normal" font-weight="normal" text-decoration="normal" x="746.8347878819818" y="24.50280495" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Generate offline recovery code</text></g><g/><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 59.44174278714063 95.887643371 L 59.44174278714063 2596.807268601" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray="12.565541,5.445067766666667"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 561.766019312401 95.887643371 L 561.766019312401 2596.807268601" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray="12.565541,5.445067766666667"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1284.188072676203 95.887643371 L 1284.188072676203 2596.807268601" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray="12.565541,5.445067766666667"/></g><g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 8.167601650000002 51.782594461 L 110.71588392428126 51.782594461 L 110.71588392428126 95.887643371 L 8.167601650000002 95.887643371 L 8.167601650000002 51.782594461 Z" stroke-miterlimit="10" stroke-width="2.613632528" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="25.891297230500008" y="79.55244007099999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">YourClient</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 501.6693989272135 51.782594461 L 621.8626396975885 51.782594461 L 621.8626396975885 95.887643371 L 501.6693989272135 95.887643371 L 501.6693989272135 51.782594461 Z" stroke-miterlimit="10" stroke-width="2.613632528" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="519.3930945077135" y="79.55244007099999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">ThisPackage</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 1230.0649782919922 51.782594461 L 1338.3111670604142 51.782594461 L 1338.3111670604142 95.887643371 L 1230.0649782919922 95.887643371 L 1230.0649782919922 51.782594461 Z" stroke-miterlimit="10" stroke-width="2.613632528" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1247.7886738724922" y="79.55244007099999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">YourServer</text></g></g><g><g><g><rect fill="white" stroke="none" x="78.7717333588073" y="128.558049971" width="197.21972908082031" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="81.2220138538073" y="143.259732941" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">The user is already logged in.</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 59.44174278714063 149.793814261 L 124.78255598714063 149.793814261 L 124.78255598714063 171.029578551 L 72.8910601708073 171.029578551" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g transform="translate(59.44174278714063,171.029578551) translate(-59.44174278714063,-171.029578551)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 73.0544122038073 164.22324384266665 L 59.44174278714063 171.029578551 L 73.0544122038073 177.83591325933332 Z"/></g></g><g><g><rect fill="white" stroke="none" x="78.7717333588073" y="195.53238350099997" width="217.32708992066406" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="81.2220138538073" y="210.23406647099995" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Generate a offline recovery code</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 59.44174278714063 216.768147791 L 124.78255598714063 216.768147791 L 124.78255598714063 238.00391208099998 L 72.8910601708073 238.00391208099998" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g transform="translate(59.44174278714063,238.00391208099998) translate(-59.44174278714063,-238.00391208099998)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 73.0544122038073 231.19757737266664 L 59.44174278714063 238.00391208099998 L 73.0544122038073 244.81024678933332 Z"/></g></g><g><g><rect fill="white" stroke="none" x="78.7717333588073" y="262.506717031" width="156.45381416382813" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="81.2220138538073" y="277.208400001" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Enter current password</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 59.44174278714063 283.74248132099996 L 124.78255598714063 283.74248132099996 L 124.78255598714063 304.978245611 L 72.8910601708073 304.978245611" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g transform="translate(59.44174278714063,304.978245611) translate(-59.44174278714063,-304.978245611)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 73.0544122038073 298.17191090266664 L 59.44174278714063 304.978245611 L 73.0544122038073 311.7845803193333 Z"/></g></g><g><g><rect fill="white" stroke="none" x="155.46576486141143" y="329.48105056099996" width="310.2762323767187" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="157.91604535641142" y="344.18273353099994" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">getAuthenticationToken('username','password')</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 59.44174278714063 350.716814851 L 548.3167019287343 350.716814851" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g transform="translate(561.766019312401,350.716814851) translate(-561.766019312401,-350.716814851)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 548.1533498957343 343.91048014266664 L 561.766019312401 350.716814851 L 548.1533498957343 357.5231495593333 Z"/></g></g><g><g><rect fill="white" stroke="none" x="206.27818856746612" y="375.21961980099996" width="208.65138496460938" height="21.23576429"/></g><g><rect fill="white" stroke="none" x="206.27818856746612" y="391.55482310099995" width="140.13312019410156" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="208.7284690624661" y="389.92130277099994" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Return the authentication token</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="208.7284690624661" y="406.25650607099993" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"> keccak(master_key)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 561.766019312401 412.790587391 L 72.8910601708073 412.790587391" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g transform="translate(59.44174278714063,412.790587391) translate(-59.44174278714063,-412.790587391)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 73.0544122038073 405.98425268266664 L 59.44174278714063 412.790587391 L 73.0544122038073 419.5969220993333 Z"/></g></g><g><g><rect fill="white" stroke="none" x="532.8578828519062" y="437.29339234099996" width="274.64992012085935" height="21.23576429"/></g><g><rect fill="white" stroke="none" x="532.8578828519062" y="453.62859564099995" width="277.9140497595312" height="21.23576429"/></g><g><rect fill="white" stroke="none" x="532.8578828519062" y="469.96379894099994" width="207.8496576696875" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="535.3081633469062" y="451.99507531099994" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Up to your dApp but as the user is logged</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="535.3081633469062" y="468.3302786109999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">in on your dApp side you probably want to</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="535.3081633469062" y="484.6654819109999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">authentication on this endpoint.</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 59.44174278714063 491.19956323099996 L 1270.7387552925363 491.19956323099996" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g transform="translate(1284.188072676203,491.19956323099996) translate(-1284.188072676203,-491.19956323099996)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 1270.5754032595364 484.3932285226666 L 1284.188072676203 491.19956323099996 L 1270.5754032595364 498.0058979393333 Z"/></g></g><g><g><rect fill="white" stroke="none" x="540.6137727444843" y="515.702368181" width="262.402269974375" height="21.23576429"/></g><g><rect fill="white" stroke="none" x="540.6137727444843" y="532.037571481" width="83.11813606324219" height="21.23576429"/></g><g><rect fill="white" stroke="none" x="540.6137727444843" y="548.372774781" width="144.26341499390625" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="543.0640532394843" y="530.404051151" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Get the encrypted key info for the user: </text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="543.0640532394843" y="546.739254451" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">- username </text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="543.0640532394843" y="563.074457751" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">- authenticationToken</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 59.44174278714063 569.608539071 L 1270.7387552925363 569.608539071" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g transform="translate(1284.188072676203,569.608539071) translate(-1284.188072676203,-569.608539071)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 1270.5754032595364 562.8022043626667 L 1284.188072676203 569.608539071 L 1270.5754032595364 576.4148737793333 Z"/></g></g><g><g><rect fill="white" stroke="none" x="1303.5180632478698" y="594.111344021" width="226.55401863160156" height="21.23576429"/></g><g><rect fill="white" stroke="none" x="1303.5180632478698" y="610.446547321" width="186.61842598023438" height="21.23576429"/></g><g><rect fill="white" stroke="none" x="1303.5180632478698" y="626.781750621" width="36.66861213746094" height="21.23576429"/></g><g><rect fill="white" stroke="none" x="1303.5180632478698" y="643.116953921" width="146.9333979040625" height="21.23576429"/></g><g><rect fill="white" stroke="none" x="1303.5180632478698" y="659.452157221" width="134.707201615" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1305.9683437428698" y="608.813026991" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Looking from db using username: </text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1305.9683437428698" y="625.148230291" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">- serverAuthenticationToken</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1305.9683437428698" y="641.483433591" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">- salt</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1305.9683437428698" y="657.818636891" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">- EncryptedWallet.key</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1305.9683437428698" y="674.153840191" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">- EncryptedWallet.iv</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1284.188072676203 680.687921511 L 1349.528885876203 680.687921511 L 1349.528885876203 701.923685801 L 1297.6373900598699 701.923685801" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g transform="translate(1284.188072676203,701.923685801) translate(-1284.188072676203,-701.923685801)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 1297.8007420928698 695.1173510926667 L 1284.188072676203 701.923685801 L 1297.8007420928698 708.7300205093334 Z"/></g></g><g><g><rect fill="white" stroke="none" x="581.0960098840676" y="726.4264907510001" width="594.8501459509375" height="21.23576429"/></g><g><rect fill="white" stroke="none" x="581.0960098840676" y="742.7616940510001" width="4.90056099" height="21.23576429"/></g><g><rect fill="white" stroke="none" x="581.0960098840676" y="759.096897351" width="634.0412470251563" height="21.23576429"/></g><g><rect fill="white" stroke="none" x="581.0960098840676" y="775.432100651" width="4.90056099" height="21.23576429"/></g><g><rect fill="white" stroke="none" x="581.0960098840676" y="791.767303951" width="683.7620722204688" height="21.23576429"/></g><g><rect fill="white" stroke="none" x="581.0960098840676" y="808.102507251" width="227.37719978394531" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="583.5462903790676" y="741.128173721" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">serverHashMatchesClientHash(salt, clientAuthenticationToken, serverAuthenticationToken)</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="583.5462903790676" y="757.463377021" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"></text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="583.5462903790676" y="773.798580321" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Makes sure the stored auth token matches the one sending in before returning the encrypted info</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="583.5462903790676" y="790.133783621" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"></text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="583.5462903790676" y="806.468986921" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">If you are not using node as your backend the github\readme explains what this method does so you can</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="583.5462903790676" y="822.804190221" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">write it in the language your using.</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1284.188072676203 829.338271541 L 575.2153366960677 829.338271541" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g transform="translate(561.766019312401,829.338271541) translate(-561.766019312401,-829.338271541)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 575.3786887290677 822.5319368326667 L 561.766019312401 829.338271541 L 575.3786887290677 836.1446062493334 Z"/></g></g><g><g><rect fill="white" stroke="none" x="873.6656586267434" y="853.841076491" width="98.62277473511719" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="876.1159391217434" y="868.542759461" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Boolean result</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 561.766019312401 875.076840781 L 1270.7387552925363 875.076840781" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g transform="translate(1284.188072676203,875.076840781) translate(-1284.188072676203,-875.076840781)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 1270.5754032595364 868.2705060726666 L 1284.188072676203 875.076840781 L 1270.5754032595364 881.8831754893333 Z"/></g></g><g><g><rect fill="white" stroke="none" x="1303.5180632478698" y="899.5796457309999" width="220.8489252478125" height="21.23576429"/></g><g><rect fill="white" stroke="none" x="1303.5180632478698" y="915.9148490309999" width="246.93338264527344" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1305.9683437428698" y="914.2813287009999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">If false do not carry on and return</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1305.9683437428698" y="930.6165320009999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">and 4xx http code back to your client.</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1284.188072676203 937.1506133209999 L 1349.528885876203 937.1506133209999 L 1349.528885876203 958.386377611 L 1297.6373900598699 958.386377611" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g transform="translate(1284.188072676203,958.386377611) translate(-1284.188072676203,-958.386377611)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 1297.8007420928698 951.5800429026666 L 1284.188072676203 958.386377611 L 1297.8007420928698 965.1927123193333 Z"/></g></g><g><g><rect fill="white" stroke="none" x="600.3847154324726" y="982.889182561" width="60.3049799353125" height="21.23576429"/></g><g><rect fill="white" stroke="none" x="600.3847154324726" y="999.224385861" width="142.86038459839844" height="21.23576429"/></g><g><rect fill="white" stroke="none" x="600.3847154324726" y="1015.559589161" width="130.63418830933594" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="602.8349959274726" y="997.590865531" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Returns:</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="602.8349959274726" y="1013.926068831" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">-EncryptedWallet.key</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="602.8349959274726" y="1030.261272131" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">-EncryptedWallet.iv</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1284.188072676203 1036.795353451 L 72.8910601708073 1036.795353451" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g transform="translate(59.44174278714063,1036.795353451) translate(-59.44174278714063,-1036.795353451)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 73.0544122038073 1029.9890187426668 L 59.44174278714063 1036.795353451 L 73.0544122038073 1043.6016881593332 Z"/></g></g><g><g><rect fill="white" stroke="none" x="207.24097238094268" y="1061.298158401" width="206.72581733765625" height="21.23576429"/></g><g><rect fill="white" stroke="none" x="207.24097238094268" y="1077.633361701" width="83.83394111695313" height="21.23576429"/></g><g><rect fill="white" stroke="none" x="207.24097238094268" y="1093.9685650010001" width="77.31282295289063" height="21.23576429"/></g><g><rect fill="white" stroke="none" x="207.24097238094268" y="1110.3037683010002" width="129.5748011023047" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="209.69125287594267" y="1075.999841371" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">generateOfflineRecoveryCode(</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="209.69125287594267" y="1092.335044671" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">'username', </text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="209.69125287594267" y="1108.6702479710002" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">'password',</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="209.69125287594267" y="1125.0054512710003" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"> EncryptedKeyInfo)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 59.44174278714063 1131.539532591 L 548.3167019287343 1131.539532591" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g transform="translate(561.766019312401,1131.539532591) translate(-561.766019312401,-1131.539532591)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 548.1533498957343 1124.7331978826667 L 561.766019312401 1131.539532591 L 548.1533498957343 1138.3458672993331 Z"/></g></g><g><g><rect fill="white" stroke="none" x="153.32187448055205" y="1156.042337541" width="314.5640131384375" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="155.77215497555204" y="1170.7440205110001" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">return GenerateRecoveryCodeResponse object</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 561.766019312401 1177.278101831 L 72.8910601708073 1177.278101831" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g transform="translate(59.44174278714063,1177.278101831) translate(-59.44174278714063,-1177.278101831)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 73.0544122038073 1170.4717671226667 L 59.44174278714063 1177.278101831 L 73.0544122038073 1184.0844365393332 Z"/></g></g><g><g><rect fill="white" stroke="none" x="415.93240677768745" y="1201.780906781" width="128.76593269410156" height="21.23576429"/></g><g><rect fill="white" stroke="none" x="415.93240677768745" y="1218.1161100810002" width="85.5519281775" height="21.23576429"/></g><g><rect fill="white" stroke="none" x="415.93240677768745" y="1234.4513133810003" width="397.4057489782812" height="21.23576429"/></g><g><rect fill="white" stroke="none" x="415.93240677768745" y="1250.7865166810004" width="365.88835395875" height="21.23576429"/></g><g><rect fill="white" stroke="none" x="415.93240677768745" y="1267.1217199810005" width="310.4838739782812" height="21.23576429"/></g><g><rect fill="white" stroke="none" x="415.93240677768745" y="1283.4569232810006" width="511.7650019079687" height="21.23576429"/></g><g><rect fill="white" stroke="none" x="415.93240677768745" y="1299.7921265810007" width="391.156664505625" height="21.23576429"/></g><g><rect fill="white" stroke="none" x="415.93240677768745" y="1316.1273298810008" width="374.8574701696875" height="21.23576429"/></g><g><rect fill="white" stroke="none" x="415.93240677768745" y="1332.462533181001" width="4.90056099" height="21.23576429"/></g><g><rect fill="white" stroke="none" x="415.93240677768745" y="1348.797736481001" width="374.0557123571875" height="21.23576429"/></g><g><rect fill="white" stroke="none" x="415.93240677768745" y="1365.1329397810011" width="354.0557123571875" height="21.23576429"/></g><g><rect fill="white" stroke="none" x="415.93240677768745" y="1381.4681430810012" width="4.90056099" height="21.23576429"/></g><g><rect fill="white" stroke="none" x="415.93240677768745" y="1397.8033463810013" width="325.9813105017187" height="21.23576429"/></g><g><rect fill="white" stroke="none" x="415.93240677768745" y="1414.1385496810015" width="330.8416620642187" height="21.23576429"/></g><g><rect fill="white" stroke="none" x="415.93240677768745" y="1430.4737529810016" width="309.9827143103125" height="21.23576429"/></g><g><rect fill="white" stroke="none" x="415.93240677768745" y="1446.8089562810017" width="318.6513544470312" height="21.23576429"/></g><g><rect fill="white" stroke="none" x="415.93240677768745" y="1463.1441595810018" width="314.6141230017187" height="21.23576429"/></g><g><rect fill="white" stroke="none" x="415.93240677768745" y="1479.4793628810019" width="94.52829231324219" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="418.38268727268746" y="1216.4825897510002" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Send to the server </text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="418.38268727268746" y="1232.8177930510003" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"> - Username</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="418.38268727268746" y="1249.1529963510004" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"> - GenerateRecoveryCodeResponse.offlineRecoveryCode.id</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="418.38268727268746" y="1265.4881996510005" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"> - GenerateRecoveryCodeResponse.ethereumAddress </text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="418.38268727268746" y="1281.8234029510006" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"> - GenerateRecoveryCodeResponse.signature </text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="418.38268727268746" y="1298.1586062510007" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"> - GenerateRecoveryCodeResponse.userRecoveryCodeAuthenticationToken, </text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="418.38268727268746" y="1314.4938095510008" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"> - GenerateRecoveryCodeResponse.encryptedKeyInfo.key </text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="418.38268727268746" y="1330.829012851001" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"> - GenerateRecoveryCodeResponse.encryptedKeyInfo.iv</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="418.38268727268746" y="1347.164216151001" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"></text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="418.38268727268746" y="1363.4994194510011" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">The signature is a signed hash of the recovery encrypted</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="418.38268727268746" y="1379.8346227510012" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">private key + iv signed with your ethereum private key</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="418.38268727268746" y="1396.1698260510013" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"></text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="418.38268727268746" y="1412.5050293510014" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">As you have this signature here you in theory can</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="418.38268727268746" y="1428.8402326510015" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">verify the ethereum address is owned by this user.</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="418.38268727268746" y="1445.1754359510016" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">You can add more authentication in here like a </text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="418.38268727268746" y="1461.5106392510017" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">jwt token or something along those lines but that</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="418.38268727268746" y="1477.8458425510019" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">is up to you to decide depending on your dApps</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="418.38268727268746" y="1494.181045851002" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">requirements.</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 59.44174278714063 1500.715127171 L 1270.7387552925363 1500.715127171" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g transform="translate(1284.188072676203,1500.715127171) translate(-1284.188072676203,-1500.715127171)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 1270.5754032595364 1493.9087924626667 L 1284.188072676203 1500.715127171 L 1270.5754032595364 1507.5214618793332 Z"/></g></g><g><g><rect fill="white" stroke="none" x="1303.5180632478698" y="1525.2179321209999" width="263.18962349" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1305.9683437428698" y="1539.919615091" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Check if recovery code id already exists</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1284.188072676203 1546.453696411 L 1349.528885876203 1546.453696411 L 1349.528885876203 1567.689460701 L 1297.6373900598699 1567.689460701" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g transform="translate(1284.188072676203,1567.689460701) translate(-1284.188072676203,-1567.689460701)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 1297.8007420928698 1560.8831259926667 L 1284.188072676203 1567.689460701 L 1297.8007420928698 1574.4957954093331 Z"/></g></g><g><g><rect fill="white" stroke="none" x="1303.5180632478698" y="1592.1922656509998" width="237.13382209839844" height="21.23576429"/></g><g><rect fill="white" stroke="none" x="1303.5180632478698" y="1608.527468951" width="267.305590286875" height="21.23576429"/></g><g><rect fill="white" stroke="none" x="1303.5180632478698" y="1624.862672251" width="58.701540604257815" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1305.9683437428698" y="1606.893948621" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">If exists throw 4xx you can not have</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1305.9683437428698" y="1623.229151921" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">repeated recovery code id (should never</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1305.9683437428698" y="1639.5643552210001" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">happen)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1284.188072676203 1646.098436541 L 1349.528885876203 1646.098436541 L 1349.528885876203 1667.3342008309999 L 1297.6373900598699 1667.3342008309999" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g transform="translate(1284.188072676203,1667.3342008309999) translate(-1284.188072676203,-1667.3342008309999)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 1297.8007420928698 1660.5278661226666 L 1284.188072676203 1667.3342008309999 L 1297.8007420928698 1674.140535539333 Z"/></g></g><g><g><rect fill="white" stroke="none" x="581.0960098840676" y="1691.8370057809998" width="454.7000605017187" height="21.23576429"/></g><g><rect fill="white" stroke="none" x="581.0960098840676" y="1708.172209081" width="351.242602005625" height="21.23576429"/></g><g><rect fill="white" stroke="none" x="581.0960098840676" y="1724.507412381" width="353.669359818125" height="21.23576429"/></g><g><rect fill="white" stroke="none" x="581.0960098840676" y="1740.842615681" width="4.90056099" height="21.23576429"/></g><g><rect fill="white" stroke="none" x="581.0960098840676" y="1757.1778189810002" width="374.0557123571875" height="21.23576429"/></g><g><rect fill="white" stroke="none" x="581.0960098840676" y="1773.5130222810003" width="354.0557123571875" height="21.23576429"/></g><g><rect fill="white" stroke="none" x="581.0960098840676" y="1789.8482255810004" width="4.90056099" height="21.23576429"/></g><g><rect fill="white" stroke="none" x="581.0960098840676" y="1806.1834288810005" width="683.7620722204688" height="21.23576429"/></g><g><rect fill="white" stroke="none" x="581.0960098840676" y="1822.5186321810006" width="227.37719978394531" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="583.5462903790676" y="1706.5386887509999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">verifyEthereumAddress(GenerateRecoveryCodeResponse.signature,</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="583.5462903790676" y="1722.873892051" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">GenerateRecoveryCodeResponse.encryptedKeyInfo,</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="583.5462903790676" y="1739.209095351" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">GenerateRecoveryCodeResponse.ethereumAddress)</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="583.5462903790676" y="1755.5442986510002" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"></text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="583.5462903790676" y="1771.8795019510003" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">The signature is a signed hash of the recovery encrypted</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="583.5462903790676" y="1788.2147052510004" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">private key + iv signed with your ethereum private key</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="583.5462903790676" y="1804.5499085510005" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"></text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="583.5462903790676" y="1820.8851118510006" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">If you are not using node as your backend the github\readme explains what this method does so you can</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="583.5462903790676" y="1837.2203151510007" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">write it in the language your using.</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1284.188072676203 1843.7543964709998 L 575.2153366960677 1843.7543964709998" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g transform="translate(561.766019312401,1843.7543964709998) translate(-561.766019312401,-1843.7543964709998)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 575.3786887290677 1836.9480617626666 L 561.766019312401 1843.7543964709998 L 575.3786887290677 1850.560731179333 Z"/></g></g><g><g><rect fill="white" stroke="none" x="873.6656586267434" y="1868.257201421" width="98.62277473511719" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="876.1159391217434" y="1882.958884391" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Boolean result</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 561.766019312401 1889.492965711 L 1270.7387552925363 1889.492965711" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g transform="translate(1284.188072676203,1889.492965711) translate(-1284.188072676203,-1889.492965711)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 1270.5754032595364 1882.6866310026667 L 1284.188072676203 1889.492965711 L 1270.5754032595364 1896.2993004193331 Z"/></g></g><g><g><rect fill="white" stroke="none" x="1303.5180632478698" y="1913.995770661" width="220.8489252478125" height="21.23576429"/></g><g><rect fill="white" stroke="none" x="1303.5180632478698" y="1930.3309739610002" width="246.93338264527344" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1305.9683437428698" y="1928.6974536310001" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">If false do not carry on and return</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1305.9683437428698" y="1945.0326569310002" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">and 4xx http code back to your client.</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1284.188072676203 1951.566738251 L 1349.528885876203 1951.566738251 L 1349.528885876203 1972.802502541 L 1297.6373900598699 1972.802502541" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g transform="translate(1284.188072676203,1972.802502541) translate(-1284.188072676203,-1972.802502541)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 1297.8007420928698 1965.9961678326667 L 1284.188072676203 1972.802502541 L 1297.8007420928698 1979.6088372493332 Z"/></g></g><g><g><rect fill="white" stroke="none" x="581.0960098840676" y="1997.3053074910001" width="629.9468866735938" height="21.23576429"/></g><g><rect fill="white" stroke="none" x="581.0960098840676" y="2013.6405107910002" width="404.19890083375" height="21.23576429"/></g><g><rect fill="white" stroke="none" x="581.0960098840676" y="2029.9757140910003" width="309.6678339392187" height="21.23576429"/></g><g><rect fill="white" stroke="none" x="581.0960098840676" y="2046.3109173910004" width="4.90056099" height="21.23576429"/></g><g><rect fill="white" stroke="none" x="581.0960098840676" y="2062.6461206910003" width="683.7620722204688" height="21.23576429"/></g><g><rect fill="white" stroke="none" x="581.0960098840676" y="2078.9813239910004" width="227.37719978394531" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="583.5462903790676" y="2012.0069904610002" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">hashAuthenticationTokenOnServer(GenerateRecoveryCodeResponse.userAuthenticationToken)</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="583.5462903790676" y="2028.3421937610003" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">This returns a random salt and the server authentication hash</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="583.5462903790676" y="2044.6773970610004" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">(HashAuthenticationTokenOnServerResponse)</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="583.5462903790676" y="2061.0126003610003" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"></text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="583.5462903790676" y="2077.3478036610004" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">If you are not using node as your backend the github\readme explains what this method does so you can</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="583.5462903790676" y="2093.6830069610005" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">write it in the language your using.</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1284.188072676203 2100.217088281 L 575.2153366960677 2100.217088281" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g transform="translate(561.766019312401,2100.217088281) translate(-561.766019312401,-2100.217088281)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 575.3786887290677 2093.4107535726666 L 561.766019312401 2100.217088281 L 575.3786887290677 2107.0234229893335 Z"/></g></g><g><g><rect fill="white" stroke="none" x="682.5776993371926" y="2124.7198932310002" width="342.273363724375" height="21.23576429"/></g><g><rect fill="white" stroke="none" x="682.5776993371926" y="2141.0550965310003" width="480.7986933142187" height="21.23576429"/></g><g><rect fill="white" stroke="none" x="682.5776993371926" y="2157.3902998310004" width="335.745043411875" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="685.0279798321926" y="2139.4215762010003" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">return HashAuthenticationTokenOnServerResponse</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="685.0279798321926" y="2155.7567795010004" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">- HashAuthenticationTokenOnServerResponse.serverAuthenticationHash</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="685.0279798321926" y="2172.0919828010005" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">- HashAuthenticationTokenOnServerResponse.salt</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 561.766019312401 2178.626064121 L 1270.7387552925363 2178.626064121" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g transform="translate(1284.188072676203,2178.626064121) translate(-1284.188072676203,-2178.626064121)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 1270.5754032595364 2171.8197294126667 L 1284.188072676203 2178.626064121 L 1270.5754032595364 2185.4323988293336 Z"/></g></g><g><g><rect fill="white" stroke="none" x="1303.5180632478698" y="2203.1288690710003" width="356.124437943125" height="21.23576429"/></g><g><rect fill="white" stroke="none" x="1303.5180632478698" y="2219.4640723710004" width="484.8716913610937" height="21.23576429"/></g><g><rect fill="white" stroke="none" x="1303.5180632478698" y="2235.7992756710005" width="339.81804145875" height="21.23576429"/></g><g><rect fill="white" stroke="none" x="1303.5180632478698" y="2252.1344789710006" width="405.5517450720312" height="21.23576429"/></g><g><rect fill="white" stroke="none" x="1303.5180632478698" y="2268.4696822710007" width="391.156664505625" height="21.23576429"/></g><g><rect fill="white" stroke="none" x="1303.5180632478698" y="2284.804885571001" width="374.8574701696875" height="21.23576429"/></g><g><rect fill="white" stroke="none" x="1303.5180632478698" y="2301.140088871001" width="4.90056099" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1305.9683437428698" y="2217.8305520410004" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Insert in recovery code db table mapped to username </text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1305.9683437428698" y="2234.1657553410005" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"> - HashAuthenticationTokenOnServerResponse.serverAuthenticationHash</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1305.9683437428698" y="2250.5009586410006" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"> - HashAuthenticationTokenOnServerResponse.salt</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1305.9683437428698" y="2266.8361619410007" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"> - GenerateRecoveryCodeResponse.offlineRecoveryCode.id, </text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1305.9683437428698" y="2283.171365241001" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"> - GenerateRecoveryCodeResponse.encryptedKeyInfo.key </text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1305.9683437428698" y="2299.506568541001" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"> - GenerateRecoveryCodeResponse.encryptedKeyInfo.iv</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1305.9683437428698" y="2315.841771841001" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"></text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1284.188072676203 2322.375853161 L 1349.528885876203 2322.375853161 L 1349.528885876203 2343.6116174510003 L 1297.6373900598699 2343.6116174510003" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g transform="translate(1284.188072676203,2343.6116174510003) translate(-1284.188072676203,-2343.6116174510003)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 1297.8007420928698 2336.805282742667 L 1284.188072676203 2343.6116174510003 L 1297.8007420928698 2350.4179521593337 Z"/></g></g><g><g><rect fill="white" stroke="none" x="651.841365212746" y="2368.114422401" width="39.947085037851565" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="654.291645707746" y="2382.816105371" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Done</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1284.188072676203 2389.350186691 L 72.8910601708073 2389.350186691" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g transform="translate(59.44174278714063,2389.350186691) translate(-59.44174278714063,-2389.350186691)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 73.0544122038073 2382.5438519826666 L 59.44174278714063 2389.350186691 L 73.0544122038073 2396.1565213993335 Z"/></g></g><g><g><rect fill="white" stroke="none" x="78.7717333588073" y="2413.8529916410002" width="477.2769647985937" height="21.23576429"/></g><g><rect fill="white" stroke="none" x="78.7717333588073" y="2430.1881949410003" width="410.71998848023435" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="81.2220138538073" y="2428.5546746110003" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Show GenerateRecoveryCodeResponse.offlineRecoveryCode.userCode</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="81.2220138538073" y="2444.8898779110004" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">to the user for them to download or copy and save somewhere</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 59.44174278714063 2451.423959231 L 124.78255598714063 2451.423959231 L 124.78255598714063 2472.659723521 L 72.8910601708073 2472.659723521" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g transform="translate(59.44174278714063,2472.659723521) translate(-59.44174278714063,-2472.659723521)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 73.0544122038073 2465.8533888126667 L 59.44174278714063 2472.659723521 L 73.0544122038073 2479.4660582293336 Z"/></g></g><g><g><rect fill="white" stroke="none" x="78.7717333588073" y="2497.1625284710003" width="213.254076615" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="81.2220138538073" y="2511.8642114410004" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Offline recovery code generated</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 59.44174278714063 2518.398292761 L 124.78255598714063 2518.398292761 L 124.78255598714063 2539.634057051 L 72.8910601708073 2539.634057051" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g transform="translate(59.44174278714063,2539.634057051) translate(-59.44174278714063,-2539.634057051)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 73.0544122038073 2532.8277223426667 L 59.44174278714063 2539.634057051 L 73.0544122038073 2546.4403917593336 Z"/></g></g></g><g/><g/><g/></g></svg>